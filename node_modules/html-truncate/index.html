<!DOCTYPE html>

<html>
	<head>
        <script type="text/javascript" src="./dist/truncate.js"></script>
        <style>
textarea { display: block; width: 400px; height: 200px; font-size: 24px; }
input { font-size: 24px; }
button { font-size: 24px; }
ul { list-style-type: none; }
        </style>
		<title>HTML Truncate</title>
	</head>

	<body>
    <textarea>hello world</textarea>
    <input id="length" type="text" value="4">
    <button>click</button>
    <div>
        <h2>options</h2>
        <ul>
            <li>keep image tag <input type="checkbox" id="keepImageTag"></li>
            <li>customize suffix <input type="text" id="suffix" value="..."></li>
        </ul>
    </div>
    <div>
        <h2>result</h2>
        <p id="result"></p>
    </div>
        <script type="text/javascript">
var $ = document.querySelector.bind(document),
    input = $('textarea'),
    output = $('#result'),
    keepImageTag = $('input[type="checkbox"]'),
    suffix = $('#suffix');

function escapeHTML(string) {
    return string.replace(/>/g,'&gt;').replace(/</g,'&lt;').replace(/"/g,'&quot;');
}

function run() {
    var length = $('#length').value,
        options = {
            keepImageTag: keepImageTag.checked,
            ellipsis: suffix.value
        }

    output.innerHTML = escapeHTML(window.truncate(input.value, length, options));
}

var button = $('button');
button.onclick = run;

run();
        </script>
	</body>
</html>
